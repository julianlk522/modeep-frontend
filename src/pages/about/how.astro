---
import GlobalTagCalcDiagram from '../../components/About/GlobalTagCalcDiagram.astro'
import NarrowSearchDiagram from '../../components/About/NarrowSearchDiagram.astro'
import WideSearchDiagram from '../../components/About/WideSearchDiagram.astro'
import ScrollUp from '../../components/ScrollUp.astro'
import BaseLayout from '../../layouts/BaseLayout.astro'
---

<BaseLayout Title='About Modeep'>
	<main>
        <h1>How Modeep Works</h1>

        <section>
            <h2 id="cats" class="subsection">Meow</h2>
            <p><em>Cats</em> are an important piece of all this... Hey, what? Seriously! Their name is a shorthand for <a href="#tags">tag categories</a>. (And as a <a href="https://en.wikipedia.org/wiki/I_Can_Has_Cheezburger%3F">classic Internet symbol</a>, cats also seem well fitted to moderate a curated collection of links.) Don't be alarmed by talk of "stacking cats"; animals are wonderful and none were harmed making this tool.</p>

            <p>When you <em>reveal a treasured link</em> (AKA post it here), you decide the best cats to describe it and submit them as a vote. Your vote influences the link's <em><a href="#global-tags">global tag</a></em>. When searching, you can declare which cats must be present in the global tag of any found links by adding <em>cat filters</em>.</p>

            <p>Searches always show their <em>Top Cats</em>, the most frequent cats throughout all returned links, or their Top <em>Subcats</em>, the most frequent cats that were <strong>not provided as filters</strong>, if the search included cat filters.</p>

			<p id="cat-stacking">Top cats or subcats can be stacked on existing filters to add specificity and rapidly concentrate on some idea(s). Click a cat to add it to your constraints, drilling deeper and more precisely into the pile of stuff you've found. Then, if your search gets too specific and the pile becomes too measly, click the "X" on a cat to remove it and re-broaden your focus. <strong>Wield this power to become a cat-stacking ninja, capable of swiftly plucking needles of epicness from the digital haystack.</strong></p>
        </section>

		<NarrowSearchDiagram />
		<WideSearchDiagram />

        <section>
            <div id="core-actions">
                <h2 class="subsection">Core Feedback Actions: </h2>

                <p>Ways anyone can vote on how links are organized.</p>
            </div>

            <ol>
                <li><strong>Summarize</strong></li>
                <li><strong>Copy</strong></li>
                <li><strong>Star</strong></li>
                <li><strong>Tag</strong></li>
            </ol>

            <h3 class="subsection">Summarize</h3>

            <p>
                Every link has a summary page where anyone can
                offer their own description of the linked content.
            </p>

            <p>
                Good summaries can be upvoted. The most upvoted summary will be shown above a link's URL to give a compact gist of what it contains.
            </p>

            <h3 class="subsection">Copy</h3>

            <p>
                <strong>Copying</strong> links to your Treasure Map lets you and others easily find them again by reading your Treasure Map. It improves discoverability via proliferation.
            </p>

            <h3 class="subsection">Star</h3>

            <p>
                <strong>Starring</strong> links vouches for their "goodness" (comprehensiveness, authenticity, hilarity, whatever). It improves discoverability via corroboration. You can give up to 3 stars to a link.
            </p>

            <p>
                Starring helps great content appear closer to the top of searches, boosting its relative visibility and allowing attention to flow naturally to the most noteworthy items.
            </p>

            <h3 id="tags" class="subsection">Tag</h3>

            <p>
                <strong>Tagging</strong> links arranges them with like material. Tags are personal interpretations of the topics that various links may be associated with, or terms that someone interested in them might look up. Tagging improves discoverability by allowing accurate filtration.
            </p>

            <p>
                We don't have to agree on the most appropriate cat(s) for any link. Each tag author's configuration can be viewed on their Treasure Map, and it will also influence the link's global tag in proportion to its <a href="#global-tag-calculation">estimated goodness of fit</a>.
            </p>
        </section>
			
		<section id="global-tags">
			<h2> The Global Treasure Map and Global Tags</h2>

			<p>
				Any <em>user-submitted tag</em>
				decides how a link is sorted on it's author's Treasure Map. But every link also has a <em>global tag</em>,
				which determines its placement on the <a href='/search'>Search</a
			> and <a href='/more'>More</a> pages. A global tag can be thought of as an approximate consensus of a link's key concepts.
			</p>

			<p>Global tags for a link are calculated automatically based on: <strong>1)</strong> the age of each user-submitted tag and <strong>2)</strong> the frequencies of cats across all of them. Each link shows its global tag. (Unless the link is viewed from a user's Treasure Map; then it will show <em>their</em> tag.) In addition to the global tag, you can view the top user-submitted tags for any link.</p>

			<p>Each user-submitted tag shows its <em>lifespan overlap percentage</em>, author, date of submission, and cats. Tags that have kept the same combination of cats for the greatest portion of the link's lifespan are ranked highest. Editing a tag's cats will reset it's lifespan overlap percentage.</p>

			<p><strong>Note:</strong> a link's global cats will not necessarily resemble only its highest-ranked tags. If many newer tags contain some cats that are not already present in the global tag, it's likely that those will also be assigned.</p>

			<p>This system is based on the assumptions that the best interpretations of various links' cats (most logical, most useful, etc.) will be those that <strong>1)</strong> reappear often across tags or <strong>2)</strong> remain unedited for a long time.</p>

			<p>A long-unchanged tag could still be a poor representation, but if enough people disagree and submit alternative tags their collective input will nullify it; the old tag's cats will likely be removed from the link's global tag.</p>
		</section>

		<section>
			<h2 id="global-tag-calculation" class="subsection">Global Tag Calculation</h2>

			<p>Note: <a href="/feedback">constructive criticism welcomed</a> for this system.</p>

			<p>For a cat to be added to link <code>L</code>'s global tags, it's <em>score</em> must be &ge;25% of the highest score among <code>L</code>'s cats.</p>

			<p><em>Scores</em> for cat <code>C</code> of link <code>L</code> are calculated as the sum of scores from all occurrences of <code>C</code> in <code>L</code>'s tags.</p>

            <p>Each bit of score added for a cat is scaled down according to the weight of the tag in which the cat was found.</p>

            <p>A tag's weight is inversely proportional to its total number of cats. (e.g., a cat from a tag with only 1 cat counts for 10x more than one from a tag with 10 cats.)</p>

			<p>Weights for tag <code>T</code> are calculated as <em>lifespan overlap percentage</em> of <code>T</code>, divided by <code>T</code>'s number of cats. </p>

			<p>Lifespan overlap percentage for tag <code>T</code> of link <code>L</code> is the percentage of <code>L</code>'s time on Modeep that <code>T</code> has existed since creation or last edit.</p>

			<GlobalTagCalcDiagram />
		</section>

        <section>
            <h2 id="retrieving-metadata" class="subsection">Retrieving Metadata</h2>
			<p>Modeep employs <em>very limited</em> use of automated website scraping to fetch <a href="https://ogp.me/">Open Graph</a> metadata for submitted links. This is to attempt to find a thumbnail preview image and descriptive text ("Auto Summary") to display with them.</p>

            <p>These requests can be identified by the <strong>Modeep-Bot</strong> user agent.</p>

			<p>A max of 1-3 automated requests go out to each submitted URL (Modeep-Bot tries different protocol prefixes, e.g., "https://" and "http://", if the first request fails).</p>

            <p>The goal, as with all of this, is to promote appreciation for great, public Internet sites by improving their visibility. Great links with an appropriate thumbnail and/or summary are easiest for would-be-enjoyers to notice.</p>

			<p><strong>Anyone can have their domain added to a non-scrape list upon request, with no questions asked</strong>: just email <a href="mailto:support@modeep.org">support@modeep.org</a> to let us know.</p>
        </section>

		<ScrollUp />
	</main>
</BaseLayout>

<style>
	section {
		padding: 1rem 0;
	}

	h2 {
		margin-top: 0.5rem;
	}

    #core-actions > * {
        display: inline;
    }

    section:has(#core-actions) h3 {
        margin-top: 2rem;
    }

    @media (min-width: 480px) {
		section {
			padding: 2rem 0;
		}
	}
</style>
